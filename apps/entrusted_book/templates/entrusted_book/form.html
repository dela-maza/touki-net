{# apps/entrusted_book/templates/entrusted_book/form.html #}
{% extends "_layout/form_base.html" %}

<!--submitがフォーム外なのでフォームIDを決めておく-->
{% set form_id = "entrusted-book-form" %}

{# ヘッダー右側のボタンだけを差し込む #}
{% block header_actions %}
<button type="submit" class="btn primary" form="{{ form_id }}">
    {% if is_edit %}
    <img src="{{ url_for('static', filename='icon/16/check.svg') }}" alt="">
    Update
    {% else %}
    <img src="{{ url_for('static', filename='icon/16/new.svg') }}" alt="">
    Create
    {% endif %}
</button>
<a href="{{ back_url }}" class="btn secondary">
    <img src="{{ url_for('static', filename='icon/16/x.svg') }}" alt="">
    Cancel
</a>
{% endblock %}

{% block body %}
<form method="POST" id="{{ form_id }}">
    {{ form.hidden_tag() }}  {# ← CSRF 含む #}

    <div class="container">
        <div class="form-box">
            <div class="form-group">
                {{ form.name.label(class="form-label") }}
                {{ form.name(class="form-input", placeholder="受託簿名を入力") }}
                {% if form.name.errors %}
                <ul class="form-errors">{% for e in form.name.errors %}<li>{{ e }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.contract_date.label(class="form-label") }}
                {{ form.contract_date(class="form-input", type="date") }}
                {% if form.contract_date.errors %}
                <ul class="form-errors">{% for e in form.contract_date.errors %}<li>{{ e }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.execution_date.label(class="form-label") }}
                {{ form.execution_date(class="form-input", type="date") }}
                {% if form.execution_date.errors %}
                <ul class="form-errors">{% for e in form.execution_date.errors %}<li>{{ e }}</li>{% endfor %}</ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.note.label(class="form-label") }}
                {{ form.note(class="form-textarea", rows="10", placeholder="備考（任意）") }}
                {% if form.note.errors %}
                <ul class="form-errors">{% for e in form.note.errors %}<li>{{ e }}</li>{% endfor %}</ul>
                {% endif %}
            </div>
        </div>
    </div>
</form>
{% endblock %}