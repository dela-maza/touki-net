<!-- amount_document/templates/amount_document/form.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{{ "Edit Amount Document" if document else "New Amount Document" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('amount_document.static', filename='css/amount_document.css') }}">
</head>
<body>

{% if is_edit %}
{% set action_url = url_for('amount_document.edit', document_id=document.id) %}
{% else %}
{% set action_url = url_for('amount_document.create', client_id=client.id) %}
{% endif %}
<form method="POST" action="{{ action_url }}">
    {{ form.hidden_tag() }}
    <div id="wrapper">

        <div class="btn-group">
            <a class="btn nav-btn" href="{{ url_for('amount_document.index',client_id=client.id) }}">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                    <path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"></path>
                </svg>
            </a>
            <label>{{ form.apply_withholding() }} {{ form.apply_withholding.label.text }}</label>
            <label>{{ form.apply_consumption_tax() }} {{ form.apply_consumption_tax.label.text }}</label>
        </div>

        <div id="main-frame">
            <table>
                <tr>
                    <td colspan="13" height="40"></td>
                </tr>
                <tr>{% for _ in range(13) %}
                    <td></td>
                    {% endfor %}
                </tr>
                <tr>
                    <td colspan="13"></td>
                </tr>

                <tr>
                    <td class="document-title" colspan="13" align="center">金額帳票</td>
                </tr>


                <tr>

                    <td colspan="10">　</td>
                    <td colspan="1" class="text-end">{{ form.estimate_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.estimate_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="10"></td>

                    <td colspan="1" class="text-end">{{ form.receipt_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.receipt_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="1">物件名</td>
                    <td colspan="9" style="word-break: break-word;">
                        {{ form.entrusted_book_name(class="form-control", style="width:100%;box-sizing:border-box;") }}
                        {% if form.entrusted_book_name.errors %}
                        <div style="color:#b00;font-size:12px;">
                            {{ form.entrusted_book_name.errors[0] }}
                        </div>
                        {% endif %}
                    </td>
                    <td colspan="1" class="text-end">{{ form.invoice_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.invoice_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="13" height="50"></td>
                </tr>
            </table>

            <table class="frame">
                <tr>{% for _ in range(13) %}
                    <td width="75"></td>
                    {% endfor %}
                </tr>

                {% include 'amount_document/_table_items.html' %}

                <tr>
                    <td class="border-top-double" colspan="13">
                        {{ form.note(class="form-control", style="width:100%;box-sizing:border-box;") }}
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div style="text-align:center;margin:20px 0;">
        <button type="submit" class="btn primary-btn">保存</button>
    </div>
</form>

{# フラッシュの表示（必須） #}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul style="max-width:1050px;margin:10px auto;padding:8px 12px;background:#fffbe6;border:1px solid #ffe58f;">
    {% for category, message in messages %}
    <li><strong>{{ category }}</strong>: {{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}

</body>
</html>