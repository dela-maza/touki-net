<!--apps/client/templates/client/_detail.html-->
<div class="detail-section">
    <div class="section-header">
        <h3 class="detail-title">
            <img src="{{ url_for('static', filename='icon/24/person.svg') }}" alt="" width="20" height="20">
            <span>Client</span>
        </h3>
        <div class="btn-group">
            <a class="btn" href="{{ url_for('client.create', entrusted_book_id=book.id) }}">
                <img src="{{ url_for('static', filename='icon/16/new.svg') }}" alt="">
                New
            </a>
            <a class="btn" href="{{ url_for('client.index') }}">
                <img src="{{ url_for('static', filename='icon/16/list.svg') }}" alt="">
                Clients
            </a>
        </div>
    </div>

    {% if book.clients %}
    <div class="stack">
        {% for client in book.clients %}
        <article class="card card--sub">
            <header class="card-header">
                <div class="flex-align-center gap-2">
                    {{ client.name }}
                </div>
                <div class="row-actions">
                    <a class="btn icon" href="{{ url_for('client.edit', client_id=client.id) }}">
                        <img src="{{ url_for('static', filename='icon/16/pencil.svg') }}" alt="edit">
                    </a>
                    <a class="btn icon" href="{{ url_for('client.confirm_delete', client_id=client.id) }}">
                        <img src="{{ url_for('static', filename='icon/16/trash.svg') }}" alt="delete">
                    </a>
                </div>
            </header>

            <div class="card-body">
                <dl class="meta">
                    <dt>ID</dt>
                    <dd>{{ client.id }}</dd>
                    <dt>Type</dt>
                    <dd>{{ client.client_type.label }}</dd>
                    <dt>name</dt>
                    <dd>{{ client.name or '-' }}</dd>
                    <dt>name_kana</dt>
                    <dd>{{ client.name_kana or '-' }}</dd>  <!-- ← 修正 -->
                    <dt>Birth date</dt>
                    <dd>{{ client.birth_date.strftime('%Y-%m-%d') if client.birth_date else '-' }}</dd>
                    <dt>Postal</dt>
                    <dd>{{ client.postal_code or '-' }}</dd>
                    <dt>Address</dt>
                    <dd>{{ client.address or '-' }}</dd>
                    <dt>Phone</dt>
                    <dd>{{ client.phone_number or '-' }}</dd>
                    <dt>Email</dt>
                    <dd>{{ client.email or '-' }}</dd>
                    <dt>Note</dt>
                    <dd>{{ client.note or '-' }}</dd>
                    <dt>Equity</dt>
                    <dd>
                        {% if client.equity_numerator and client.equity_denominator %}
                        {{ client.equity_numerator }}/{{ client.equity_denominator }}
                        {% else %}-{% endif %}
                    </dd>
                </dl>
            </div>

            <div class="card-footer">
                <div class="footer-left">
                    updated: {{ client.updated_at.strftime('%Y-%m-%d %H:%M') if client.updated_at else '' }}
                </div>
                <div class="footer-right">
                    <a class="btn icon" href="{{ url_for('documents.index', client_id=client.id) }}">
                        <img src="{{ url_for('static', filename='icon/16/note.svg') }}" alt="documents">
                    </a>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <div class="help">No clients yet.</div>
    {% endif %}
</div>