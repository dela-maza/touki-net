<!-- apps/client/templates/client/_detail.html -->
<div class="detail-section">
    <!-- 見出しをカードのヘッダーとして一体化 -->
    <div class="section-header">
        <h2 class="section-header__title header-title">
            <img src="{{ url_for('static', filename='icon/24/person.svg') }}" alt="">
            <span>Client</span>
        </h2>
        <div class="btn-group btn-group--sm">
            <a class="btn icon" href="{{ url_for('client.create', entrusted_book_id=book.id) }}" title="New">
                <img src="{{ url_for('static', filename='icon/16/new.svg') }}" alt="">
            </a>
            <a class="btn icon" href="{{ url_for('client.index') }}" title="Clients">
                <img src="{{ url_for('static', filename='icon/16/list.svg') }}" alt="">
            </a>
        </div>
    </div>

    <!-- 一体化カード本体 -->
    <article class="card card--attach">
        {% if book.clients %}
        {% for client in book.clients %}
        <!-- 行（クライアント1件） -->
        <section class="card-section">
            <header class="card-section__header">
                <div class="card-section__inner">

                    <h3 class="card-section___title ">
                        {{ client.name or '-' }}
                    </h3>

                    <div class="row-actions">
                        <a class="btn icon" href="{{ url_for('client.documents_index', client_id=client.id) }}"
                           title="Documents">
                            <img src="{{ url_for('static', filename='icon/16/file-directory.svg') }}" alt="">
                        </a>
                        <a class="btn icon" href="{{ url_for('client.edit', client_id=client.id) }}" title="Edit">
                            <img src="{{ url_for('static', filename='icon/16/pencil.svg') }}" alt="">
                        </a>
                        <a class="btn icon" href="{{ url_for('client.confirm_delete', client_id=client.id) }}"
                           title="Delete">
                            <img src="{{ url_for('static', filename='icon/16/trash.svg') }}" alt="">
                        </a>
                    </div>

                </div>


                <div class="pill_group">
                    <span class="pill">{{ client.client_type.label }}</span>
                    <span class="pill">{{ client.entity_type.label }}</span>
                </div>

            </header>

            <div class="card-section__body">
                <table class="meta-table meta-table--plain">
                    <tbody>
                    <tr>
                        <th>ID</th>
                        <td>{{ client.id }}</td>
                    </tr>

                    <tr>
                        <th>Name</th>
                        <td>{{ client.name or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Kana</th>
                        <td>{{ client.name_kana or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Birth date</th>
                        <td>{{ client.birth_date.strftime('%Y-%m-%d') if client.birth_date else '-' }}</td>
                    </tr>
                    <tr>
                        <th>Postal</th>
                        <td>{{ client.postal_code_with_mark() }}</td>
                    </tr>
                    <tr>
                        <th>Address</th>
                        <td>{{ client.address or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Phone</th>
                        <td>{{ client.phone_number or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Email</th>
                        <td>{{ client.email or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Note</th>
                        <td>{{ client.note or '-' }}</td>
                    </tr>
                    <tr>
                        <th>Equity</th>
                        <td>
                            {% if client.equity_numerator and client.equity_denominator %}
                            {{ client.equity_numerator }}/{{ client.equity_denominator }}
                            {% else %}-{% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>Updated</th>
                        <td>{{ client.updated_at.strftime('%Y-%m-%d %H:%M') if client.updated_at else '' }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>
        {% endfor %}
        {% else %}
        <div class="help">No clients yet.</div>
        {% endif %}
    </article>
</div>