<!-- apps/documents/origin/templates/origin/form.html -->
{% extends "_layout/form_base.html" %}

<!-- ヘッダー左アイコン -->
{% set icon = 'icon/24/file-badge.svg' %}

<!-- フォームがヘッダー外の送信ボタンを受け取れるようにIDを決める -->
{% set form_id = "origin-form" %}

<!-- タイトル -->
{% block title %}
{{ "登記原因証明情報を編集" if is_edit else "登記原因証明情報を作成" }}
{% endblock %}

<!-- ヘッダータイトル -->
{% block heading %}
Origin
{% endblock %}

<!-- ヘッダーメタ情報 -->
{% block header_meta %}
<span class="form-header__heading">- {{ client.name }} -</span>
{% endblock %}

<!-- ヘッダー右側：アクション -->
{% block header_actions %}
<button type="submit" class="btn primary" form="{{ form_id }}">
    {% if is_edit %}
    <img src="{{ url_for('static', filename='icon/16/check.svg') }}" alt=""> Update
    {% else %}
    <img src="{{ url_for('static', filename='icon/16/new.svg') }}" alt=""> Create
    {% endif %}
</button>
<a class="btn secondary" href="{{ back_url or url_for('client.documents_index', client_id=client.id) }}">
    <img src="{{ url_for('static', filename='icon/16/x.svg') }}" alt=""> Cancel
</a>
{% endblock %}

{# 追加CSS #}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/documents/document.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/documents/document_form.css') }}">
{% endblock %}

{# 本文 #}
{% block content %}
<form id="{{ form_id }}" method="POST"
      action="{% if is_edit %}{{ url_for('origin.edit', document_id=document.id) }}{% else %}{{ url_for('origin.create', client_id=client.id) }}{% endif %}">
    {{ form.hidden_tag() }}
    {{ form.client_id() }}

    <div class="container">
        <div class="form-box">
            <h1 class="page-title">登記原因証明情報</h1>

            <!-- 登記原因（プルダウン + 補足） -->
            <div class="form-group">
                {{ form.cause_type.label(class="form-label") }}
                <div class="flex-row">
                    {{ form.cause_type(class="form-input") }}
                    {{ form.cause_suffix(class="form-input", placeholder="必要に応じて追記") }}
                </div>
                {% if form.cause_type.errors or form.cause_suffix.errors %}
                <ul class="form-errors">
                    {% for e in form.cause_type.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                    {% for e in form.cause_suffix.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.right_holders.label(class="form-label") }}
                {{ form.right_holders(class="form-textarea", rows="3",
                placeholder="例）\n（1/2）東京都〇〇区…〇丁目…番…　山田太郎\n（1/2）東京都〇〇区…〇丁目…番…　山田花子") }}
                {% if form.right_holders.errors %}
                <ul class="form-errors">
                    {% for e in form.right_holders.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.obligation_holders.label(class="form-label") }}
                {{ form.obligation_holders(class="form-textarea", rows="3",
                placeholder="例）\n（1/1）東京都〇〇区…〇丁目…番…　佐藤次郎") }}
                {% if form.obligation_holders.errors %}
                <ul class="form-errors">
                    {% for e in form.obligation_holders.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.cause_fact.label(class="form-label") }}
                {{ form.cause_fact(
                class="form-textarea",
                rows="4",
                placeholder="config.ini から自動生成。必要に応じて編集してください。"
                ) }}
                {% if form.cause_fact.errors %}
                <ul class="form-errors">
                    {% for e in form.cause_fact.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <div class="form-group">
                <span class="form-label">不動産の表示</span>
                <div class="estate-description flex-row">

                    <div class="estate-description-col">
                        {{ form.real_estate_description_1(class="form-textarea",
                        rows="18") }}
                    </div>
                    <div class="estate-description-col">
                        {{ form.real_estate_description_2(class="form-textarea",
                        rows="18") }}
                    </div>
                </div>
            </div>
        </div>

</form>
{% endblock %}