<!--apps/documents/delivery/templates/delivery/form.html-->
{% extends "_layout/form_base.html" %}

<!-- ヘッダー左アイコン -->
{% set icon = 'icon/24/package-dependents.svg' %}

<!-- フォームがヘッダー外の送信ボタンを受け取れるようにIDを決める -->
{% set form_id = "delivery-form" %}

<!-- タイトル -->
{% block title %}
{{ client.name }}
{% endblock %}

<!-- ヘッダータイトル -->
{% block heading %}
{{ title }}
{% endblock %}

<!-- ヘッダーメタ情報 -->
{% block header_meta %}
<span class="form-header__heading">- {{ client.name }} -</span>
{% endblock %}

<!-- ヘッダー右側：アクション -->
{% block header_actions %}
<button type="submit" class="btn primary" form="{{ form_id }}">
    {% if is_edit %}
    <img src="{{ url_for('static', filename='icon/16/check.svg') }}" alt=""> Update
    {% else %}
    <img src="{{ url_for('static', filename='icon/16/new.svg') }}" alt=""> Create
    {% endif %}
</button>
<a class="btn secondary" href="{{ back_url or url_for('client.documents_index', client_id=client.id) }}">
    <img src="{{ url_for('static', filename='icon/16/x.svg') }}" alt=""> Cancel
</a>
{% endblock %}

<!-- 本文 -->
{% block content %}
<form id="{{ form_id }}" method="POST">
    {{ form.hidden_tag() }}
    {{ form.client_id() }}

    <div class="container">
        <div class="form-box">
            <!-- 宛名/簿名/発送日 -->


            <div class="form-group">
                {{ form.entrusted_book_name.label(class="form-label") }}
                {{ form.entrusted_book_name(class="form-input") }}
                {% if form.entrusted_book_name.errors %}
                <ul class="form-errors">{% for e in form.entrusted_book_name.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.sent_date.label(class="form-label") }}
                {{ form.sent_date(class="form-input", type="date") }}
                {% if form.sent_date.errors %}
                <ul class="form-errors">{% for e in form.sent_date.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <!-- 挨拶（上段） -->
            <div class="form-group">
                {{ form.greeting_paragraph.label(class="form-label") }}
                {{ form.greeting_paragraph(class="form-textarea", rows="6", placeholder="拝啓、いつもお世話になっております。…")
                }}
                {% if form.greeting_paragraph.errors %}
                <ul class="form-errors">{% for e in form.greeting_paragraph.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>

            <!-- 納品した書類（2列） -->
            <div class="form-group">
                <label class="form-label">納品した書類</label>
                <div class="table-container">
                    <table class="form-table form-table--two-cols">
                        <colgroup>
                            <col style="width:85%">
                            <col style="width:15%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>書類名</th>
                            <th>枚数</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for sub in form.documents %}
                        <tr>
                            <td>{{ sub.form.doc_name(class="form-input form-table__input") }}</td>
                            <td>{{ sub.form.copies(class="form-input form-table__input") }}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 結び（下段） -->
            <div class="form-group">
                {{ form.closing_paragraph.label(class="form-label") }}
                {{ form.closing_paragraph(class="form-textarea", rows="6") }}
                {% if form.closing_paragraph.errors %}
                <ul class="form-errors">{% for e in form.closing_paragraph.errors %}
                    <li>{{ e }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
        </div>
    </div>
</form>
{% endblock %}