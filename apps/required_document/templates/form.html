<!-- amount_document/templates/amount_document/form.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{{ "Edit Amount Document" if document else "New Amount Document" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/component/btn.css') }}">
    <link rel="stylesheet" href="{{ url_for('amount_document.static', filename='css/amount_document.css') }}">
</head>
<body>

{% if is_edit %}
{% set action_url = url_for('amount_document.edit', document_id=document.id) %}
{% else %}
{% set action_url = url_for('amount_document.create', client_id=client.id) %}
{% endif %}
<form method="POST" action="{{ action_url }}">
    {{ form.hidden_tag() }}
    <div class="btn-toolbar print-hide">
        <div class="logic-buttons">
            <label>{{ form.apply_withholding() }} {{ form.apply_withholding.label.text }}</label>
            <label>{{ form.apply_consumption_tax() }} {{ form.apply_consumption_tax.label.text }}</label>
        </div>

        <div class="nav-buttons">
            <button type="submit" class="btn primary">
                <img src="{{ url_for('static', filename='icon/16/check(white).svg') }}" alt="book icon">
                Update
            </button>
            <a href="{{ back_url }}" class="btn secondary">
                <!-- x -->
                <img src="{{ url_for('static', filename='icon/16/x.svg') }}" alt="book icon">
                Cancel
            </a>
        </div>

    </div>

    <div id="wrapper">


        <div id="main-frame">
            <table>
                <tr>
                    <td colspan="13" height="40"></td>
                </tr>
                <tr>{% for _ in range(13) %}
                    <td></td>
                    {% endfor %}
                </tr>
                <tr>
                    <td colspan="13">委任者：{{ client.name }}</td>
                </tr>

                <tr>
                    <td class="document-title" colspan="13" align="center">金額帳票</td>
                </tr>
                <tr>
                    <td colspan="10">　</td>
                    <td colspan="1" class="text-end">{{ form.estimate_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.estimate_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="1">物件名</td>
                    <td colspan="9" style="word-break: break-word;">
                        {{ form.entrusted_book_name(class="form-control", style="width:100%;box-sizing:border-box;") }}
                        {% if form.entrusted_book_name.errors %}
                        <div style="color:#b00;font-size:12px;">
                            {{ form.entrusted_book_name.errors[0] }}
                        </div>
                        {% endif %}
                    </td>
                    <td colspan="1" class="text-end">{{ form.receipt_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.receipt_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="10"></td>
                    <td colspan="1" class="text-end">{{ form.invoice_date.label }}</td>
                    <td colspan="1" class="text-end">{{ form.invoice_date(class="issued-date", type="date") }}</td>
                </tr>
                <tr>
                    <td colspan="13" height="30"></td>
                </tr>
            </table>

            <table class="frame">
                <tr>{% for _ in range(13) %}
                    <td width="75"></td>
                    {% endfor %}
                </tr>

                {% include 'amount_document/_table_items.html' %}

                <tr>
                    <td class="border-top-double" colspan="13">
                        {{ form.note(class="form-control", style="width:100%;box-sizing:border-box;") }}
                    </td>
                </tr>
            </table>
        </div>
    </div>
</form>
{# フラッシュの表示（必須） #}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul style="max-width:1050px;margin:10px auto;padding:8px 12px;background:#fffbe6;border:1px solid #ffe58f;">
    {% for category, message in messages %}
    <li><strong>{{ category }}</strong>: {{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}

</body>
</html>